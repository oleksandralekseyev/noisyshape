(function(){"use strict";const e=self;e.addEventListener("message",o=>{const t=o.data;!t||t.type!=="build"||a(t)});function a(o){try{const t=o.meshes.map(i=>p(i)),s={type:"complete",modelId:o.modelId,meshes:t};e.postMessage(s)}catch(t){const s={type:"error",modelId:o.modelId,message:t instanceof Error?t.message:"Failed to build sculpt data"};e.postMessage(s)}}function p(o){const t=o.indices.length/3,s=new Float32Array(t*3);for(let i=0;i<t;i+=1){const n=i*3,c=o.indices[n]*3,d=o.indices[n+1]*3,r=o.indices[n+2]*3,l=o.positions[c],u=o.positions[c+1],f=o.positions[c+2],y=o.positions[d],b=o.positions[d+1],I=o.positions[d+2],g=o.positions[r],x=o.positions[r+1],z=o.positions[r+2];s[n]=(l+y+g)/3,s[n+1]=(u+b+x)/3,s[n+2]=(f+I+z)/3}return{meshId:o.meshId,centroids:s}}})();
